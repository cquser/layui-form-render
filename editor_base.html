<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title></title>
    <link rel="stylesheet" href="libs/layui/css/layui.css?v=1">
    <link rel="stylesheet" href="icons/bootstrap-icons-1.4.1/bootstrap-icons.css">
    <link rel="stylesheet" href="libs/select2/css/select2.min.css">
    <style>



        .upload_ul {
            border: dashed 0px #009;
        }

        .upload_ul li {
            list-style-type: none;
            float: left;
            display: inline;
            border: dashed 1px #009;
            list-style: none;
            margin: 5px;
            padding: 0px;
        }

        .upload_tools_div {
            display: block;
            position: absolute;
            pointer-events: none;
            border: solid coral 0px;
        }

        .upload_image_style {
            width: 100px;
            height: 80px;
        }


        .list li {
            list-style-type: none;
            float: left;
            display: inline;
            border: dotted 1px #009;
            list-style: none;
            margin: 0px;
            padding: 0px;
        }


        .layui-form-item {
            margin-bottom: 10px;
            clear: both;
            *zoom: 1;
        }

        /*.layui-form-radio {*/
        /*    line-height: 28px;*/
        /*    margin: 6px 0px 0 0;*/
        /*    padding-right: 5px;*/
        /*    cursor: pointer;*/
        /*    font-size: 0;*/
        /*}*/

        .select2-container--default .select2-selection--multiple .select2-selection__choice {
            background-color: #337ab7;
            border: 1px solid #1d6fa5;
            color: #fff;
            border-radius: 4px;
            cursor: default;
            float: left;
            margin-right: 5px;
            margin-top: 5px;
            padding: 3px 5px;
        }

        .select2-container--default .select2-selection--multiple .select2-selection__choice__remove {
            color: rgba(255, 255, 255, .7);
            float: right;
            margin-left: 5px;
            margin-right: -2px;
        }

        .select2-container .select2-search--inline {
            float: left;
            border: none;
        }

        .select2-container--default .select2-selection--multiple {
            background-color: white;
            border: 1px solid #eee;
            border-radius: 4px;
            cursor: text;
            min-height: 38px;
        }

    </style>
    <style>

        .bi {
            font-size: 0.8rem;
            color: #fff;
        }

    </style>
</head>
<script src="libs/layui/layui.js?2.6.8"></script>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="libs/select2/js/select2.full.min.js"></script>
<script src="libs/ckeditor5/ckeditor.js"></script>

<body>

    <script>var _json='{"did_1626867104565_0":{"id":"text","labelWidth":"80","rowWidth":"100","inputWidth":"60","validateRule":[],"defValue":"111","name":"t","divId":"did_1626867104565_0"},"did_1626867104566_1":{"id":"select","labelWidth":"80","rowWidth":"100","options":[{"value":"0","text":"选择","isSelect":"1"},{"value":"1","text":"选项2","isSelect":"0"},{"value":"2","text":"选项3","isSelect":"1"}],"name":"t1","divId":"did_1626867104566_1"},"did_1626867104566_2":{"id":"select2","labelWidth":"80","rowWidth":"100","inputWidth":"60","options":[{"value":"0","text":"选择","isSelect":"0"},{"value":"1","text":"选项2","isSelect":"1"},{"value":"2","text":"选项3","isSelect":"0"},{"value":4,"text":"选项4","isSelect":"0"}],"name":"t2","divId":"did_1626867104566_2"}}';</script>
<form class="layui-form" id="form" lay-filter="form" action=""><div class="layui-form-item adminj-sort-item" id="did_1626867104565_0" cpt_id="text" style="width: 100%;">
                            <label class="layui-form-label">text</label>
                            <div class="layui-input-inline" style="width:60%;">
                                <input type="text" name="t" autocomplete="off" class="layui-input" style="width: 99%;">
                            </div>
            <div class="layui-form-mid layui-word-aux"></div>
        </div><div class="layui-form-item adminj-sort-item" id="did_1626867104566_1" cpt_id="select" style="width: 100%;">
        <label class="layui-form-label">下拉选项</label>
        <div class="layui-input-inline">
          <select name="t1"><option value="0">选择</option><option value="1" selected="">选项2</option><option value="2">选项3</option></select>
        </div>
            <div class="layui-form-mid layui-word-aux"></div>

      </div><div class="layui-form-item adminj-sort-item" id="did_1626867104566_2" cpt_id="select2" style="width: 100%;">
        <label class="layui-form-label" style="margin-top: -3px;">下拉多选</label>
        <div class="layui-input-inline" style="width:60%;">
                <select name="t2" lay-ignore="" class="select2" multiple="multiple" data-placeholder="" data-dropdown-css-class="select2-purple" style="width: 99%;" id="select_did_1626867104566_2"><option value="0" selected="">选择</option><option value="1">选项2</option><option value="2" selected="">选项3</option><option value="4" selected="">选项4</option></select>
        </div>

    </div></form>

<span style="display: none">
    <div id="uploadImages">
        <ul class="upload_ul">
               <li>
                        <div class="upload_image_style" update_width="true">
                            <div class="upload_image_style" style="position:absolute;z-index: 597;border: solid 0px;" flag="upload_div" >
                              <div class="layui-upload-list" style="text-align: center;line-height: 60px;">
                                  <i class="bi bi-cloud-upload" style="font-size: 1.3em;color: #1d6fa5;" ></i>
                                <p id="msgText" style="display: none"></p>
                              </div>
                              <div id="upload_bar_div" style="top:35%;width: 100%; display: none;position:absolute;"  update_width="true">
                                <div class="layui-progress layui-progress-big" lay-showpercent="yes" lay-filter="layui-progress">
                                  <div class="layui-progress-bar" lay-percent=""></div>
                                </div>
                              </div>
                            </div>
                         <div class="upload_image_style" id="upload_image_div" style="position:absolute;z-index: 598;border:dotted 0px red;pointer-events: none;" update_width="true">
                                 <img class="layui-upload-img" style="wdith:100%;height: 100px;pointer-events: none;display: none;" id="image_src"   >
                         </div>
                          <div class="upload_image_style" id="upload_mask_div" style="position:absolute;z-index: 599;pointer-events: auto; display: none" update_width="true">

                         </div>

                        </div>


               </li>

               <li id="add_div" class="upload_image_style" style=" border: dotted 1px #1d6fa5;text-align: center">
                   <span class="bi bi-plus-circle" style="font-size: 2em; color: #1d6fa5;line-height: 80px;"></span>
               </li>

        </ul>
    </div>
</span>
</body>
<script src="adminj/adminj_form.js"></script>
<script src="adminj/adminj_utils.js"></script>
</html>
<script>
    //必须
    function getPropertiesMap() {
        return propertiesMap;
    }
    var propertiesMap={}
    //var _configJSON='[{"id":"hidden","validateRule":[],"name":"aaa"},{"id":"text","labelWidth":"80","lineWidth":"100","inputWidth":"60","validateRule":[],"name":"bbbbb"},{"id":"date","labelWidth":"80","lineWidth":"100","dateFormat":"date|yyyy-MM-dd","name":"date"},{"id":"subimtData"}]';
    var editId="";//${editId}
    var $;
    layui.use('element', function () {
        $ = layui.$;
        propertiesMap=JSON.parse(_json);
        adminj.init(propertiesMap);

        try {

            layui.form.on('submit(postButton)', function (data) {
                var data = layui.form.val('form')
                adminj.convertFormValue(data)

                var val=JSON.stringify(data);
                console.log(val)
                // if(editId=='0') {
                //     save(val )
                // }else{
                //     update(val)
                // }

                return false;
            });

            //加载修改初始化数据
            if(editId!='0'){
                //loadData();
            }
        }catch (e){
            console.log('init error:'+e)
        }

    });



    //保存新数据
    // function save(formData){
    //     ajaxData('post','InsertData',formData,function (data) {
    //         layui.layer.msg(data.message);
    //         parent._table.reload({},true);
    //         resetData();
    //     })
    // }
    //
    //
    //
    // function loadData(){
    //     ajaxData('get','LoadEditData?id='+editId,{},function (data) {
    //         _status=data.result.status+'';
    //         data.result.status=_status==undefined || _status==1?"1":"0";
    //         layui.form.val("form",data.result);
    //         layui.form.render()
    //
    //     })
    // }
    //
    // function update(formData){
    //     ajaxData('post','UpdateData',formData,function (data) {
    //         resetData();
    //         var index = parent.layer.getFrameIndex(window.name);
    //         parent.layer.close(index);
    //         parent._table.reload({},true);
    //         parent.layer.msg(data.message);
    //     })
    // }
    //
    // //提交数据
    // function postData(){
    //     $("#formSubmit").trigger('click');
    // }
    //
    // //重置数据
    // function resetData(){
    //     $(".layui-form")[0].reset();
    // }



</script>
